/*
baekjoon 1260��: DFS�� BFS

�ð� ����: 2��
�޸� ����: 128 MB
 
����
�׷����� DFS�� Ž���� ����� BFS�� Ž���� ����� ����ϴ� ���α׷��� �ۼ��Ͻÿ�. ��, �湮�� �� �ִ� ������ ���� ���� ��쿡�� ���� ��ȣ�� ���� ���� ���� �湮�ϰ�, �� �̻� �湮�� �� �ִ� ���� ���� ��� �����Ѵ�. ���� ��ȣ�� 1������ N�������̴�.

�Է�
ù° �ٿ� ������ ���� N(1 �� N �� 1,000), ������ ���� M(1 �� M �� 10,000), Ž���� ������ ������ ��ȣ V�� �־�����. ���� M���� �ٿ��� ������ �����ϴ� �� ������ ��ȣ�� �־�����. � �� ���� ���̿� ���� ���� ������ ���� �� �ִ�. �Է����� �־����� ������ ������̴�.

���
ù° �ٿ� DFS�� ������ �����, �� ���� �ٿ��� BFS�� ������ ����� ����Ѵ�. V���� �湮�� ���� ������� ����ϸ� �ȴ�.
*/

//#define _CRT_SECURE_NO_WARNINGS

#include <iostream>
#include <queue>
//#include <cstdio>

using namespace std;

int adj[1001][1001] = { 0, };
bool visited[1001] = { false, };
bool discovered[1001] = { false, };
int n, m, v;
int a, b;

void dfs(int v) //����Լ��� ����
{
	//���� �湮�ߴٰ� ���
	cout << v << " ";
	//���� �湮 ó��
	visited[v] = true;
	//��� ���� ������ 1���� ��ȸ�ϸ鼭 (���� ��ȣ ���� ��)
		//�� �� �ִ� �����̰� && ���� �湮���� �ʾ�����
			//dfs()

	for (int i = 1; i <= n; i++)
	{
		if (adj[v][i] == 1 && !visited[i])
		{
			dfs(i);
		}
	}
	//��� ������ �湮�� �������� �����ϰ� ���� �������� ���ư���
}

void bfs(int v) //ť�� ����
{
	int vertex;
	queue<int> q;
	//������ ť�� ���
	q.push(v);
	//������ ã�Ҵٰ� ���
	discovered[v] = true;
	//ť�� ��������
		//ť�� ����� ù ���� ���
		//������ ù ������ ��������
			//��� ���� ������ 1���� ��ȸ�ϸ鼭 (���� ��ȣ ���� ��)
				//�� �� �ִ� �����̰� && ������ ã�� ���ߴٸ�
					//ť�� ���
					//������ ã�Ҵٰ� ���

	while (!q.empty())
	{
		vertex = q.front();
		q.pop();
		cout << vertex << " ";

		for (int i = 1; i <= n; i++)
		{
			if (adj[vertex][i] == 1 && !discovered[i])
			{
				q.push(i);
				discovered[i] = true;
			}
		}
	}
}

int main(void)
{
	ios_base::sync_with_stdio(false);
	cin.tie(NULL);
	cout.tie(NULL);

	cin >> n >> m >> v;
	for (int i = 0; i < m; i++)
	{
		cin >> a >> b;

		adj[a][b] = 1; adj[b][a] = 1;
	}

	dfs(v);
	cout << "\n";
	bfs(v);
}

/*
������ ���� n, ������ ���� m, Ž���� ������ ������ ��ȣ v
������ ������ ���� �Է� �޾� �׷��� ���� (���� ����Ʈ��)
v�� �������� dfs(v) (��� �湮)
v�� �������� bfs(v) (��� �湮)

�ð� ���⵵: 10000 + 1000 * 1000 + 1000 * 1000 = 2010000ȸ ����
 */
