/*
baekjoon 18115��: ī�� ����

�ð� ����: 2�� (�߰� �ð� ����)
�޸� ����: 1024 MB

����
�����̴� ī�� ����� �����ϰ� �ִ�. �������� �տ� �鸰 ī�带 �ϳ��� �������� �ٴڿ� �������� �Ѵ�. �����̰� �� �� �ִ� ����� ���� 3������.

���� ���� ī�� 1���� �ٴڿ� �������´�.
������ �� ��° ī�带 �ٴڿ� �������´�. ī�尡 2�� �̻��� ���� �� �� �ִ�.
���� �ؿ� �ִ� ī�带 �ٴڿ� �������´�. ī�尡 2�� �̻��� ���� �� �� �ִ�.
�����̴� ó���� ī�� N���� ��� �ִ�. ī�忡�� 1���� N������ ������ �ߺ����� �ʰ� ���� �ִ�. ����� N�� ����Ͽ� ī�带 �� ���������� ��, ���� �ִ� ī����� Ȯ���ߴ��� ���������� ������� 1, 2, ��, N�� ���� �־���!

��� �����̴� ó���� ī�尡 ��� ��ġ�Ǿ� �־����� �ñ�������. ó�� ī���� ���¸� ����Ͽ���.

�Է�
ù ��° �ٿ��� N (1 �� N �� 106)�� �־�����.
�� ��° �ٿ��� ���̰� N�� ���� A�� �־�����. Ai�� x�̸�, i��°�� ī�带 �������� �� x�� ����� ��ٴ� ���̴�. Ai�� 1, 2, 3 �� �ϳ��̸�, An�� �׻� 1�̴�.

���
�ʱ� ī���� ���¸� ���������� ������� ����Ͽ���. 
*/

#include <bits/stdc++.h>

using namespace std;

typedef long long ll;
typedef unsigned long long ull;

int n;
int arr[1000000];
deque<int> dq;

int main(void) {
	ios_base::sync_with_stdio(false);
	cin.tie(NULL);
	cout.tie(NULL);
	
	cin >> n;
	for(int i=0; i<n; i++) {
		cin >> arr[i];
	}
	
	int cnt=1;
	for(int i=n-1; i>=0; i--, cnt++) {
		if(arr[i] == 1) {
			dq.push_front(cnt);
		}
		else if(arr[i] == 2) {
			int temp = dq.front();
			dq.pop_front();
			dq.push_front(cnt);
			dq.push_front(temp);
		}
		else {
			dq.push_back(cnt);
		}
	}
	
	for(int i=0; i<n; i++) {
		cout << dq[i] << " ";
	}
}

/*
�ڷᱸ��, ��/�� (��/�Ʒ�)�� ��� ����� �� �ִ� �ڷᱸ���� deque�� ���� 
*/
